---
layout: default
title: 文件下载中心
description: "「侵权专线」"
header-img: "img/bg-download.jpg"
header-mask: 0.3
---

<div class="container">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <h1 class="my-4">软件资源库</h1>
      
      <div class="search-box">
        <input type="text" id="searchInput" class="form-control" 
               placeholder="根据描述搜索文件...">
      </div>

      <div class="post-container">
        <table class="table table-hover table-bordered">
          <thead class="thead-dark">
            <tr>
              <th>名称</th>
              <th>描述</th>
              <th>版本</th>
              <th>作者</th>
              <th>发布时间</th>
              <th>操作</th>
            </tr>
          </thead>
          <tbody id="fileTableBody">
            <tr id="loadingRow">
              <td colspan="6" class="text-center">加载中...</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

  <script src="/js/jquery.min.js"></script>
  <script src="/js/bootstrap.min.js"></script>
  <script>
    // 加载并渲染文件数据
    function loadFiles() {
      fetch('/data/files.json')
        .then(response => response.json())
        .then(files => {
          renderTable(files);
          setupSearch(files);
        });
    }

    // 渲染表格数据
    function renderTable(files) {
      const tbody = document.getElementById('fileTableBody');
      tbody.innerHTML = files.map(file => `
        <tr>
          <td>${file.name}</td>
          <td>${file.ds}</td>
          <td>${file.vin}</td>
          <td>${file.wrt}</td>
          <td>${file.time}</td>
          <td>
            <a href="${file.url}" class="btn btn-primary download-btn">
              下载
            </a>
          </td>
        </tr>
      `).join('');
    }

    // 设置搜索功能
    function setupSearch(files) {
      const searchInput = document.getElementById('searchInput');
      
      searchInput.addEventListener('input', function(e) {
        const keyword = e.target.value.toLowerCase();
        const filtered = files.filter(file => 
          file.ds.toLowerCase().includes(keyword)
        );
        
        renderTable(filtered);
        highlightKeyword(keyword);
      });
    }

    // 高亮搜索关键词
    function highlightKeyword(keyword) {
      if (!keyword) return;

      const cells = document.querySelectorAll('td:nth-child(2)');
      cells.forEach(cell => {
        const text = cell.innerText;
        const regex = new RegExp(`(${keyword})`, 'gi');
        cell.innerHTML = text.replace(regex, '<span class="highlight">$1</span>');
      });
    }

    // 初始化加载
    window.onload = loadFiles;
</script>

{% if site.disqus_username %}
<!-- 复用about.html的disqus评论系统 -->
<div class="comment">
    <div id="disqus_thread" class="disqus-thread"></div>
</div>
{% endif %}